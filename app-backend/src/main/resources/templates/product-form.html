<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja">
<head>
    <meta charset="UTF-8">
    <!-- title があれば表示、無ければ '商品フォーム' -->
    <title th:text="${title} ?: '商品フォーム'"></title>

    <!-- CSS 読み込み -->
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div class="container">

    <!-- 画面タイトル -->
    <h1 th:text="${title} ?: '商品フォーム'"></h1>

    <!-- =======================
         新規登録（product.id が null のとき）
         ======================= -->
    <form th:if="${product.id == null}"
          method="post"
          th:action="@{/products}">
        <!-- 入力欄（共通部品）を外部ファイルから読み込む -->
        <div th:replace="products/form_fields :: product-fields"></div>
    </form>

    <!-- =======================
         編集（product.id が null でないとき）
         ======================= -->
    <form th:if="${product.id != null}"
          method="post"
          th:action="@{'/products/' + ${product.id}}">
        <!-- 入力欄（共通部品）を外部ファイルから読み込む -->
        <div th:replace="products/form_fields :: product-fields"></div>
    </form>

</div>
</body>
</html>
